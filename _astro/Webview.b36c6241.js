import{j as C,d as L,e as m,g as c,f as _,i as o,b as R,E as V,h as w,s as p,r as h,S as y,t as d,u as B}from"./web.9ee1b91f.js";import{f as D}from"./index.4f2c4b12.js";import{u as U}from"./index.c584f020.js";import"./Panel.801c2a10.js";import{G as f}from"./GlobalData.4e554cac.js";const G=d('<span class="text-[#f5f3c2]"></span>',2),M=d('<iframe class="absolute top-0 left-0 h-full w-full"></iframe>',2),N=d('<div class="relative h-full w-full"><!#><!/><!#><!/><div class="btn fixed bottom-4 right-4">原站</div></div>',8),T=d("<div> <!#><!/></div>",4),j=d("<div><!#><!/><a></a></div>",6),J=l=>{const{nav:r}=F();return(()=>{const e=c(G);return e.$$click=()=>r(l.href),o(e,()=>l.children),h(),e})()},F=()=>{const{webviewURL:l}=f.getApp("data"),{visibleId:r}=f.getApp("side-app");return{nav(e){const u=new URL(e,globalThis.location.toString());L(()=>{l(u.toString()),r("webview")})}}},K=()=>{const{t:l}=U(),{isPanelVisible:r}=f.getApp("side-app"),{webviewURL:e}=f.getApp("data");let u;const b=D(!0);return m(y,{get when(){return r("webview")},get children(){const $=c(N),x=$.firstChild,[v,S]=_(x.nextSibling),E=v.nextSibling,[g,k]=_(E.nextSibling),A=g.nextSibling;return o($,(()=>{const t=R(()=>!!b());return()=>t()&&(()=>{const i=c(T),n=i.firstChild,a=n.nextSibling,[s,W]=_(a.nextSibling);return o(i,()=>l("upload"),s,W),i})()})(),v,S),o($,m(V,{fallback:()=>(()=>{const t=c(j),i=t.firstChild,[n,a]=_(i.nextSibling),s=n.nextSibling;return o(t,()=>l("WebView.Error"),n,a),o(s,e),w(()=>p(s,"href",e())),t})(),get children(){const t=c(M);t.addEventListener("load",n=>{console.log(e(),"加载完毕"),b(!1)});const i=u;return typeof i=="function"?B(i,t):u=t,w(n=>{const a="allow-scripts  allow-modals allow-same-origin "+(e().startsWith(location.origin)?"allow-popups":""),s=e();return a!==n._v$&&p(t,"sandbox",n._v$=a),s!==n._v$2&&p(t,"src",n._v$2=s),n},{_v$:void 0,_v$2:void 0}),t}}),g,k),A.$$click=()=>{window.open(e(),"_blank")},h(),$}})};C(["click"]);export{K as W,J as a,F as u};
