import{g as f,i as o,e as c,h as v,F as V,t as d,j as Y,f as g,k as Re,r as E,s as He,S as le,a as Me,v as Ke,n as je}from"./web.9ee1b91f.js";import{O as Je,f as w,U as _e,W as Ge,c as Ue}from"./index.4f2c4b12.js";import{N as Z}from"./notice.940364ec.js";import{A as ye}from"./cloud.6055f26b.js";import{G as Q}from"./GlobalData.4e554cac.js";import{S as pe,a as ge,e as We,t as fe,d as qe}from"./index.b92d985b.js";import{u as Le}from"./index.c584f020.js";import{T as ze,s as Ve}from"./TagsConvertor.b3f5406f.js";import{A as Qe}from"./HeaderSecond.4fa7884b.js";import{c as Xe}from"./index.79db8632.js";import{g as Ye,a as Ze,b as et,e as tt,j as xe,t as nt,c as rt,d as ut,h as lt}from"./hasIn.294499a0.js";import{g as at,e as it}from"./memoize.49269b7f.js";function ot(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}var st=800,ct=16,pt=Date.now;function gt(e){var t=0,n=0;return function(){var r=pt(),u=ct-(r-n);if(n=r,u>0){if(++t>=st)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}function ft(e){return function(){return e}}var dt=function(){try{var e=at(Object,"defineProperty");return e({},"",{}),e}catch{}}();const X=dt;var ht=X?function(e,t){return X(e,"toString",{configurable:!0,enumerable:!1,value:ft(t),writable:!0})}:Ye;const mt=ht;var $t=gt(mt);const _t=$t;function yt(e,t,n){t=="__proto__"&&X?X(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}var xt=Object.prototype,bt=xt.hasOwnProperty;function vt(e,t,n){var r=e[t];(!(bt.call(e,t)&&it(r,n))||n===void 0&&!(t in e))&&yt(e,t,n)}var de=Math.max;function Ct(e,t,n){return t=de(t===void 0?e.length-1:t,0),function(){for(var r=arguments,u=-1,l=de(r.length-t,0),a=Array(l);++u<l;)a[u]=r[t+u];u=-1;for(var i=Array(t+1);++u<t;)i[u]=r[u];return i[t]=n(a),ot(e,this,i)}}var he=pe?pe.isConcatSpreadable:void 0;function St(e){return Ze(e)||et(e)||!!(he&&e&&e[he])}function be(e,t,n,r,u){var l=-1,a=e.length;for(n||(n=St),u||(u=[]);++l<a;){var i=e[l];t>0&&n(i)?t>1?be(i,t-1,n,r,u):tt(u,i):r||(u[u.length]=i)}return u}function At(e){var t=e==null?0:e.length;return t?be(e,1):[]}function Et(e){return _t(Ct(e,void 0,At),e+"")}function wt(e,t,n,r){if(!ge(e))return e;t=xe(t,e);for(var u=-1,l=t.length,a=l-1,i=e;i!=null&&++u<l;){var s=nt(t[u]),h=n;if(s==="__proto__"||s==="constructor"||s==="prototype")return e;if(u!=a){var _=i[s];h=r?r(_,s,i):void 0,h===void 0&&(h=ge(_)?_:rt(t[u+1])?[]:{})}vt(i,s,h),i=i[s]}return e}function Tt(e,t,n){for(var r=-1,u=t.length,l={};++r<u;){var a=t[r],i=ut(e,a);n(i,a)&&wt(l,xe(a,e),i)}return l}function Ft(e,t){return Tt(e,t,function(n,r){return lt(e,r)})}var Dt=Et(function(e,t){return e==null?{}:Ft(e,t)});const Bt=Dt;var T={};Object.defineProperty(T,"__esModule",{value:!0});T.decode=T.verify=Ee=T.sign=void 0;if(typeof crypto>"u"||!crypto.subtle)throw new Error("SubtleCrypto not supported!");function ve(e){return new Uint8Array(Array.prototype.map.call(atob(e.replace(/-/g,"+").replace(/_/g,"/").replace(/\s/g,"")),t=>t.charCodeAt(0)))}function ue(e){return btoa(String.fromCharCode.apply(0,e)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}const Ce={ES256:{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}},ES384:{name:"ECDSA",namedCurve:"P-384",hash:{name:"SHA-384"}},ES512:{name:"ECDSA",namedCurve:"P-521",hash:{name:"SHA-512"}},HS256:{name:"HMAC",hash:{name:"SHA-256"}},HS384:{name:"HMAC",hash:{name:"SHA-384"}},HS512:{name:"HMAC",hash:{name:"SHA-512"}},RS256:{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},RS384:{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-384"}},RS512:{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-512"}}};function k(e){return ve(btoa(unescape(encodeURIComponent(e))))}function Se(e){e=atob(e);const t=new ArrayBuffer(e.length),n=new Uint8Array(t);for(let r=0,u=e.length;r<u;r++)n[r]=e.charCodeAt(r);return t}function me(e){switch(e.length%4){case 0:break;case 2:e+="==";break;case 3:e+="=";break;default:throw new Error("Illegal base64url string!")}try{return JSON.parse(decodeURIComponent(escape(atob(e))))}catch{return null}}async function Ae(e,t,n={algorithm:"HS256",header:{typ:"JWT"}}){if(typeof n=="string"&&(n={algorithm:n,header:{typ:"JWT"}}),n={algorithm:"HS256",header:{typ:"JWT"},...n},e===null||typeof e!="object")throw new Error("payload must be an object");if(typeof t!="string"&&typeof t!="object")throw new Error("secret must be a string or a JWK object");if(typeof n.algorithm!="string")throw new Error("options.algorithm must be a string");const r=Ce[n.algorithm];if(!r)throw new Error("algorithm not found");e.iat||(e.iat=Math.floor(Date.now()/1e3));const u=JSON.stringify(e),l=`${ue(k(JSON.stringify({...n.header,alg:n.algorithm})))}.${ue(k(u))}`;let a="raw",i;typeof t=="object"?(a="jwk",i=t):typeof t=="string"&&t.startsWith("-----BEGIN")?(a="pkcs8",i=Se(t.replace(/-----BEGIN.*?-----/g,"").replace(/-----END.*?-----/g,"").replace(/\s/g,""))):i=k(t);const s=await crypto.subtle.importKey(a,i,r,!1,["sign"]),h=await crypto.subtle.sign(r,s,k(l));return`${l}.${ue(new Uint8Array(h))}`}var Ee=T.sign=Ae;async function we(e,t,n={algorithm:"HS256",throwError:!1}){if(typeof n=="string"&&(n={algorithm:n,throwError:!1}),n={algorithm:"HS256",throwError:!1,...n},typeof e!="string")throw new Error("token must be a string");if(typeof t!="string"&&typeof t!="object")throw new Error("secret must be a string or a JWK object");if(typeof n.algorithm!="string")throw new Error("options.algorithm must be a string");const r=e.split(".");if(r.length!==3)throw new Error("token must consist of 3 parts");const u=Ce[n.algorithm];if(!u)throw new Error("algorithm not found");const{payload:l}=ae(e);if(!l){if(n.throwError)throw"PARSE_ERROR";return!1}if(l.nbf&&l.nbf>Math.floor(Date.now()/1e3)){if(n.throwError)throw"NOT_YET_VALID";return!1}if(l.exp&&l.exp<=Math.floor(Date.now()/1e3)){if(n.throwError)throw"EXPIRED";return!1}let a="raw",i;typeof t=="object"?(a="jwk",i=t):typeof t=="string"&&t.startsWith("-----BEGIN")?(a="spki",i=Se(t.replace(/-----BEGIN.*?-----/g,"").replace(/-----END.*?-----/g,"").replace(/\s/g,""))):i=k(t);const s=await crypto.subtle.importKey(a,i,u,!1,["verify"]);return await crypto.subtle.verify(u,s,ve(r[2]),k(`${r[0]}.${r[1]}`))}T.verify=we;function ae(e){return{header:me(e.split(".")[0].replace(/-/g,"+").replace(/_/g,"/")),payload:me(e.split(".")[1].replace(/-/g,"+").replace(/_/g,"/"))}}T.decode=ae;T.default={sign:Ae,verify:we,decode:ae};const Pt=async e=>{console.log("ä½¿ç”¨é»˜è®¤æœåŠ¡: ",e);const t=await Ee({name:Math.random().toString()+Date.now()},{}.PUBLIC_JWT_PROMPT);return fetch("https://prompt-gpt.deno.dev/ai",{method:"POST",headers:{Authorization:"Barer "+t,"Content-type":"application/json"},body:JSON.stringify({prompt:e,id:"0"})})},kt=(e,t)=>(console.log("ä½¿ç”¨è‡ªå·±çš„TOKEN: ",e),fetch("https://openai-proxy-magic.deno.dev",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`},body:JSON.stringify({model:"text-davinci-003",temperature:.9,max_tokens:150,top_p:1,frequency_penalty:0,presence_penalty:.6,stop:[`
æé—®:`,`
AI:`],prompt:`
æé—®:`+e+`
AI:`,stream:!0})})),K=(e,t,n)=>({value:(...r)=>{if(r[0].trim()===""){const u="ğŸ’¢è¯·è¾“å…¥æ–‡æœ¬";return Z.error(u),Promise.reject(new Error(u))}else return n.value.apply(e,r)}}),Te=(e,t,n)=>({value:(...r)=>{if(e.ownKey)return n.value.apply(e,r);{const u="ğŸ’¢è¿™ä¸ªåŠŸèƒ½éœ€è¦ä½¿ç”¨è‡ªå·±çš„ Token";return Z.error(u),Promise.reject(new Error(u))}}}),It=(e,t,n)=>{const{username:r}=Q.getApp("data"),u=new ye.Object("gpt_record");return u.set("input",e),u.set("func",t),u.set("result",n),u.set("user",r()),u.save()},I=(e,t,n)=>({value:async(...r)=>{const u=await n.value.apply(e,r);return It(r[0],t,u),u}});var Ot=Object.defineProperty,Nt=Object.getOwnPropertyDescriptor,O=(e,t,n,r)=>{for(var u=r>1?void 0:r?Nt(t,n):t,l=e.length-1,a;l>=0;l--)(a=e[l])&&(u=(r?a(t,n,u):a(u))||u);return r&&u&&Ot(t,n,u),u};async function*Rt(e){const t=e.pipeThrough(new TextDecoderStream).getReader();for(;;){const{value:n,done:r}=await t.read();if(r)break;yield n}}let B=class{textToText(t,n=20,r){return this.query({prompt:`Below is a highly advanced image description that enriches the expressiveness of the text and converts it into a descriptive text that retains more key information. It should contain quality description, style description, subject description, detail description, .combine them to one english row text output within ${n} words. input:  ${t}`,id:"0"},r)}textToTags(t,n=20,r){return this.query({prompt:`ä¸‹é¢å°†ä¼šç»™å‡ºéå¸¸é«˜çº§çš„å›¾ç‰‡æè¿°ï¼Œä¸°å¯Œè¿™æ®µæ–‡æœ¬çš„è¡¨ç°åŠ›å¹¶è½¬åŒ–ä¸ºä¿ç•™è¾ƒå¤šå…³é”®ä¿¡æ¯çš„å…³é”®è¯ç»„ï¼ŒæŒ‰ç…§ç”»é¢è´¨é‡æè¿°ä¸é£æ ¼è¯æ±‡ã€ä¸»ä½“æè¿°ã€ç»†èŠ‚æè¿°çš„é¡ºåºä»¥é€—å·åˆ†éš”ï¼Œ ${n} è¯å·¦å³ï¼Œè‹±æ–‡å°å†™è¾“å‡ºï¼Œåˆå¹¶ä¸ºä¸€è¡Œ:${t}`,id:"0"},r)}TagsToText(t,n=20,r){return this.query({prompt:`å°†å…³é”®è¯ç»„åˆæˆæè¿°ç”»é¢çš„è¯­å¥ï¼Œè‹±æ–‡å›ç­”ï¼Œç›´æ¥æè¿°ä¸è®²åºŸè¯ï¼Œå†™åˆ°é•¿åº¦ ${n}ï¼š ${t}`,id:"0"},r)}StyleTags(t,n=20,r){return this.query({prompt:`ä½ æ˜¯ç»˜ç”»å¤§å¸ˆï¼Œç²¾é€šå„ç§é£æ ¼çš„ç»˜ç”»ï¼Œåªè®¨è®ºæŠ€æ³•ï¼Œä¸è®¨è®ºæƒ…æ„Ÿï¼Œä¸è¦è¾“å‡ºå¤šä½™çš„è¯ã€‚æè¿°ä¸€å¼ ${t}ç»˜ç”»çš„é£æ ¼ï¼Œæ±‡æ€»æˆ${n}ä¸ªå·¦å³è‹±æ–‡å…³é”®è¯ä¸€è¡Œç”¨é€—å·åˆ†éš”å¹¶è¿”å›ï¼Œç»“æœ`,id:"0"},r)}ContinueWriting(t,n,r){return this.query({id:"0",prompt:`è¯·ä»¥ ${t} å¼€å¤´ï¼Œå†™å‡º ${n} å­—å·¦å³çš„å¥å­`},r)}AskAnything(t,n,r){return this.query({id:"0",prompt:t},r)}get ownKey(){return localStorage.getItem("open_ai_key")??""}set ownKey(t){localStorage.setItem("open_ai_key",t)}get GPT(){return this.ownKey?kt:Pt}async query(t,n){let r="";return this.GPT(t.prompt,this.ownKey).then(async u=>{const l=u.body;for await(const a of Rt(l))a&&(r+=a,n(r,50));return r})}};O([K,I],B.prototype,"textToText",1);O([K,I],B.prototype,"textToTags",1);O([K,I],B.prototype,"TagsToText",1);O([I],B.prototype,"StyleTags",1);O([Te,K,I],B.prototype,"ContinueWriting",1);O([Te,K,I],B.prototype,"AskAnything",1);const M=new B,Ht=d('<select title="é»˜è®¤é¢„è®¾" class=" w-5 bg-slate-600 outline-none" value=""></select>',2),Mt=d("<option></option>",2),Kt=e=>(()=>{const t=f(Ht);return t.addEventListener("change",n=>{e.onChange(n.target.value)}),o(t,c(V,{get each(){return e.each},children:n=>(()=>{const r=f(Mt);return o(r,()=>n.name??n.value),v(()=>r.value=n.value),r})()})),t})(),Fe={ContinueWriting:"âœï¸ç»­å†™",AskAnything:"ğŸ¤”æé—®"},De={textToTags:"ğŸ·ï¸æ–‡ç”Ÿè¯",TagsToText:"ğŸ”¤è¯ç”Ÿæ–‡",textToText:"ğŸ“œæ–‡ç”Ÿæ–‡",StyleTags:"ğŸï¸é£æ ¼è¯æ±‡"},$e={...De,...Fe},Be={...De,...Fe},jt=d('<article class="h-full flex-1 overflow-scroll border-t border-solid border-slate-400 pt-2"><header class="flex items-center"><span>âœ¨</span><select class="mx-2 bg-slate-800 outline-none"></select><div class="flex-1"></div><label class="float-right inline-flex items-center text-xs" title="ç”Ÿæˆé•¿åº¦ï¼Œä¸ä¸€å®šç¬¦åˆè¦æ±‚"><div class="flex-none">é•¿åº¦ <!#><!/></div><input class="w-full px-2" type="range" min="20" max="80" step="10"></label></header><p class="select-text whitespace-pre-wrap p-4 text-sm"></p><!#><!/><ul class="flex w-full cursor-pointer justify-end gap-2 text-lg"><!#><!/><li title="å¤åˆ¶æ–‡æœ¬">ğŸ“‹</li><li title="é‡æ–°ç”Ÿæˆ">ğŸ”ƒ</li><li title="é‡‡çº³ AI">âœ…</li><li title="å¦å®š AI">â</li></ul></article>',33),Jt=d("<option></option>",2),Gt=d('<div class="text-orange-600">AI æ­£åœ¨ç”Ÿæˆä¸­ã€‚ã€‚ã€‚</div>',2),Ut=d('<div class="text-sm text-rose-600">å‘ç”Ÿé”™è¯¯äº†ğŸ˜‚:<!#><!/></div>',4),Wt=e=>{const t=e.method,n=Je(e.AIOutput??""),r=w(30),u=_e(()=>M[t()](e.input(),r(),l=>{n(l)}),{immediately:!e.lazy,initValue:""});return(()=>{const l=f(jt),a=l.firstChild,i=a.firstChild,s=i.nextSibling,h=s.nextSibling,_=h.nextSibling,x=_.firstChild,m=x.firstChild,y=m.nextSibling,[C,N]=g(y.nextSibling),b=x.nextSibling,j=a.nextSibling,J=j.nextSibling,[G,R]=g(J.nextSibling),U=G.nextSibling,W=U.firstChild,[q,P]=g(W.nextSibling),L=q.nextSibling,H=L.nextSibling,z=H.nextSibling,ee=z.nextSibling;return s.addEventListener("change",$=>{t(()=>$.target.value),u.refetch()}),o(s,c(V,{get each(){return e.block.supportAI.map($=>[Be[$],$])},children:([$,F])=>(()=>{const D=f(Jt);return D.value=F,o(D,$),D})()})),o(x,r,C,N),b.$$input=$=>{r(parseInt($.target.value))},o(j,n),o(l,c(Qe,{resource:u,loading:()=>f(Gt),error:$=>(console.error($.error()),(()=>{const F=f(Ut),D=F.firstChild,te=D.nextSibling,[ne,re]=g(te.nextSibling);return o(F,()=>$.error().message,ne,re),F})())}),G,R),o(U,c(Pe,{class:"flex-1 text-xs",get children(){return M.ownKey?"ä½¿ç”¨ Token ä¸­":"æ·»åŠ  Token "}}),q,P),L.$$click=()=>{Xe(n()),Z.success("å¤åˆ¶æˆåŠŸ")},Re(H,"click",Ge(()=>u.refetch()),!0),z.$$click=()=>{e.onConfirm&&e.onConfirm(n()),e.onClose&&e.onClose()},ee.$$click=()=>e.onClose&&e.onClose(),v(()=>s.value=t()),v(()=>b.value=r()),E(),l})()};Y(["input","click"]);let qt=(e=21)=>crypto.getRandomValues(new Uint8Array(e)).reduce((t,n)=>(n&=63,n<36?t+=n.toString(36):n<62?t+=(n-26).toString(36).toUpperCase():n>62?t+="-":t+="_",t),"");class ie{constructor(t){t&&(this.content.text=t)}id=qt();static label="åŸºæœ¬æ¨¡å—";type="base";history=[];content={text:""};comment=[];toJSON(){return Bt(this,["id","type","history","content","comment"])}fromJSON(t,n=!0){return Object.assign(this,{...t,type:n?this.type:t.type}),this}supportAI=[];transTo(t){const n=new t().fromJSON(this.toJSON());return n.history=[this.id,...this.history],n}canTransTo=[oe,se]}class oe extends ie{type="text";static label="æ–‡æœ¬æ¨¡å—";supportAI=["textToTags","TagsToText","textToText","StyleTags","ContinueWriting","AskAnything"];canTransTo=[se]}class se extends ie{type="tags";static label="æ ‡ç­¾æ¨¡å—";supportAI=["TagsToText"];canTransTo=[oe]}const Lt={text:oe,tags:se},bn=e=>new Lt[e],zt=d('<section class="flex flex-1 select-text flex-col gap-1 overflow-hidden p-2"><div class="my-2 flex overflow-hidden rounded-md"><!#><!/><textarea class="w-full flex-1  rounded-lg bg-slate-800  px-4 text-sm outline-none" placeholder="è¾“å…¥ä½ æƒ³ç”»çš„ä¸œè¥¿,ä¸ç”¨å¤ªé•¿ï¼Œå¯ä»¥ä¸­æ–‡ğŸ˜„" cols="2"></textarea></div><nav class="grid grid-cols-2 justify-items-center  gap-2 text-center text-xs"><button title="å¯¼å…¥ç¼–è¾‘åŒºçš„æ–‡æœ¬" class="my-2 w-full flex-1 cursor-pointer rounded-md p-1 transition-colors hover:bg-slate-700">å¯¼å…¥é­”å’’</button><button title="æ‹¼æ¥æ–‡æœ¬åˆ°ä½ çš„ç¼–è¾‘åŒº" class="my-2 w-full flex-1 cursor-pointer rounded-md p-1 transition-colors hover:bg-slate-700"></button></nav><article class="h-full flex-1 overflow-scroll"></article></section>',16),Vt={description:[{value:"æ—¥æœ¬ JK èè‰"},{value:"è¶…çŸ­è£™å¥³å­©åœ¨ç»‘å•é©¬å°¾"},{value:"äººå½¢æœºå™¨ç¾å°‘å¥³ï¼Œè„¸éƒ¨å¾ˆè‡ªç„¶"},{value:"å°‘å¥³ç™¾åˆæ—¥å¸¸"},{value:"ä¸¤ä¸ªå¥³ç”Ÿä¸€èµ·é€›è¡—çš„äººç‰©ç”»åƒ"},{value:"æ²™æ»©ä¸Šçš„æ³³è£…å°‘å¥³"},{value:"èµ›åšæœ‹å…‹çš„é»‘æš—éƒ½å¸‚"},{value:"ä½¿ç”¨ç»šä¸½çš„é­”æ³•çš„å¥³å·«"},{value:"é­”æ³•å°‘å¥³å’Œå¥¹çš„é­”æ³•"},{value:"è“è‰²çš„çŒ«å¨˜"},{value:"ç‹¼æ ·è²Œçš„å¸…æ°” furry"},{value:"å†¬å¤©é‡Œæ§ç€çƒ­æ°´çš„å¥³å­©"},{value:"æ¡ç€å¤´å‘çš„å¥³ç”Ÿè„¸éƒ¨ç‰¹å†™"},{value:"ä»ä¸Šæ–¹çœ‹ä¸œè¥¿æ‚ä¹±çš„å®¿èˆé‡Œåç€çš„å¥³å­©"},{value:"æ‚ä¹±çš„æˆ¿é—´é‡Œï¼Œå…‰ç€è…¿ååœ¨çª—è¾¹çš„å°‘å¥³"},{value:"å©šç¤¼ä¸Šæ§ç€èŠ±æœµçš„å¥³å­©"},{value:"ç§‹å¤©é“¶ææ ‘ä¸‹çš„ä¸€ä¸ªå¥³å­©"},{value:"åœ¨ä¸Šå­¦è·¯ä¸Šç©¿ç€ç™½ä¸å’Œé«˜ä¸­æ ¡æœçš„å¥³ç”Ÿ"},{value:"ç©¿ç™½è‰² pantyhose çš„ç¾å°‘å¥³"},{value:"å…·æœ‰æœ¦èƒ§æ„Ÿçš„ç©¿ç€é€æ˜è½»çº±çš„å¹¸ç¦èˆå¨˜"},{value:"æµªèŠ±èˆ¬çš„æ¨±èŠ±çš„é£æ™¯å›¾"},{value:"å¤ªç©ºå¤§æˆ˜"},{value:"ç²¾è‡´çš„å°‘å¥³ç©¿ç€é»‘ä¸å’Œç™½è¡¬è¡«"},{value:"åŒé©¬å°¾æ°´æ‰‹æœå¥³é«˜ä¸­ç”Ÿç©¿ç€é»‘ä¸å’ŒçŸ­è£™"},{value:"å¥³ç”Ÿç©¿ç€å¤æ‚å’Œæœ"}]},Qt=()=>{const{usersCollection:e,lists:t}=Q.getApp("tag-control"),n=w(""),r=w("ğŸ‘‘è¾“å…¥æè¿°è¯ï¼Œç‚¹å‡»ğŸ”ƒæŒ‰é’®å¯ç”Ÿæˆï¼"),{t:u}=Le(),l=new ie;return l.supportAI=Object.keys(Be),(()=>{const a=f(zt),i=a.firstChild,s=i.firstChild,[h,_]=g(s.nextSibling),x=h.nextSibling,m=i.nextSibling,y=m.firstChild,C=y.nextSibling,N=m.nextSibling;return o(i,c(Kt,{get each(){return Vt.description},onChange:b=>n(b)}),h,_),x.addEventListener("change",b=>n(b.target.value)),y.$$click=()=>{n(ze(e()).replace(/\n/g,""))},C.$$click=()=>{e(b=>b.concat(Ve(r(),t()))),Z.success(u("publicPanel.hint.CopySuccess"))},o(C,()=>u("publicPanel.CopyMagic")),o(N,c(Wt,{block:l,input:n,onClose:()=>{},onConfirm:()=>{},get method(){return w("textToTags")},AIOutput:r,lazy:!0})),v(()=>x.value=n()),E(),a})()};Y(["click"]);const Xt=d('<button class="btn">ä¸Šä¸€é¡µ</button>',2),Yt=d('<button class="btn">ä¸‹ä¸€é¡µ</button>',2),Zt=d('<section class="p-4 "><input class="my-2 w-full rounded bg-slate-900 p-1" type="text" placeholder="æœç´¢æ ‡é¢˜"><nav class="flex justify-evenly"><div>æ€»æ¡ç›®æ•°ï¼š<!#><!/></div><select class="bg-slate-900"><option value="">å…¨é€‰æ‹©</option><!#><!/></select></nav><!#><!/><nav class="flex justify-evenly py-2"><!#><!/><span><!#><!/>/<!#><!/></span><!#><!/></nav></section>',29),en=d("<option></option>",2),tn=d('<details class=" border-b border-slate-500 py-1"><summary class="line-clamp-2"><span class="btn text-xs"></span><!#><!/></summary><p class="select-text pl-4 text-sm"></p></details>',10),nn=()=>{const e=w(""),t=w(1),n=w(""),r=_e(()=>{const u=new ye.Query("gpt_record").addDescending("createdAt").limit(10).skip((t()-1)*10);return e()&&u.equalTo("func",e()),n()&&u.contains("input",n()),u.findAndCount()},{initValue:[[],0],deps:[e,t,Ue(n,300)]});return(()=>{const u=f(Zt),l=u.firstChild,a=l.nextSibling,i=a.firstChild,s=i.firstChild,h=s.nextSibling,[_,x]=g(h.nextSibling),m=i.nextSibling,y=m.firstChild,C=y.nextSibling,[N,b]=g(C.nextSibling),j=a.nextSibling,[J,G]=g(j.nextSibling),R=J.nextSibling,U=R.firstChild,[W,q]=g(U.nextSibling),P=W.nextSibling,L=P.firstChild,[H,z]=g(L.nextSibling),ee=H.nextSibling,$=ee.nextSibling,[F,D]=g($.nextSibling),te=P.nextSibling,[ne,re]=g(te.nextSibling);return l.$$input=p=>n(p.target.value),o(i,()=>r()[1],_,x),m.addEventListener("change",p=>e(p.target.value)),o(m,c(V,{get each(){return Object.entries($e)},children:([p,S])=>(()=>{const A=f(en);return A.value=p,o(A,S),A})()}),N,b),o(u,c(V,{get each(){return r()[0]},children:p=>(()=>{const S=f(tn),A=S.firstChild,ce=A.firstChild,ke=ce.nextSibling,[Ie,Oe]=g(ke.nextSibling),Ne=A.nextSibling;return o(ce,()=>$e[p.get("func")]),o(A,()=>p.get("input"),Ie,Oe),o(Ne,()=>p.get("result")),v(()=>He(A,"title",p.get("input"))),S})()}),J,G),o(R,c(le,{get when(){return t()>1},get children(){const p=f(Xt);return p.$$click=()=>t(S=>S-1),E(),p}}),W,q),o(P,t,H,z),o(P,()=>Math.ceil(r()[1]/20)||10,F,D),o(R,c(le,{get when(){return t()<Math.ceil(r()[1]/20)},get children(){const p=f(Yt);return p.$$click=()=>t(S=>S+1),E(),p}}),ne,re),v(()=>l.value=n()),v(()=>m.value=e()),E(),u})()};Y(["input","click"]);const rn=d("<span>ğŸ”‘ <!#><!/></span>",4),un=d('<header class="py-2 text-center text-lg text-white" title="AI è¾…åŠ©åŠ å¼ºæ–‡æœ¬">AI é­”å’’åŠ©æ‰‹</header>',2),ln=d('<nav class="flex w-full items-end px-4 "><!#><!/><div class="cursor-pointer">ğŸª</div><!#><!/></nav>',8),an=d('<button class="  underline-offset-2"></button>',2),Pe=e=>(()=>{const t=f(rn),n=t.firstChild,r=n.nextSibling,[u,l]=g(r.nextSibling);return t.$$click=()=>{const a=prompt("è¾“å…¥ OpenAI çš„ tokenã€‚æˆ‘ä»¬ä¸ä¼šä¿å­˜ä½ çš„ tokenï¼Œå®ƒåªä¿å­˜åœ¨ä½ çš„è®¾å¤‡ä¸­ï¼› ç©ºç™½ä¸ºåˆ é™¤ä½ çš„ tokenã€‚",M.ownKey);a?M.ownKey=a:M.ownKey=""},o(t,()=>e.children,u,l),v(()=>je(t,e.class+" cursor-pointer")),E(),t})(),vn=()=>{const e=w("AI åŠ©æ‰‹"),t=Me(e),{r18Mode:n}=Q.getApp("data"),{visibleId:r}=Q.getApp("side-app");return[f(un),c(qe,{activeId:e,lazyload:!0,get children(){return[(()=>{const u=f(ln),l=u.firstChild,[a,i]=g(l.nextSibling),s=a.nextSibling,h=s.nextSibling,[_,x]=g(h.nextSibling);return o(u,c(We,{class:"flex-1",children:m=>(()=>{const y=f(an);return y.$$click=()=>e(m),o(y,m),v(C=>Ke(y,{"text-2xl underline ":t(m)},C)),E(),y})()}),a,i),s.$$click=()=>r("prompt-store"),o(u,c(Pe,{class:"float-right"}),_,x),E(),u})(),c(fe,{id:"AI åŠ©æ‰‹",class:"flex-1",get children(){return c(Qt,{})}}),c(le,{get when(){return n()},get children(){return c(fe,{id:"é‡è§ AI",get children(){return c(nn,{})}})}})]}})]};Y(["click"]);export{Wt as A,Be as C,vn as P,oe as T,se as a,bn as c,qt as n};
