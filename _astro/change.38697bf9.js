import{j as A,g as c,i as o,e as m,t as p,d as B,h as x,r as v,F as I}from"./web.9ee1b91f.js";import{o as j,U as N,c as P,A as H}from"./index.4f2c4b12.js";import{T as k}from"./TagAPI.b55cf1a1.js";import{N as L}from"./notice.940364ec.js";import"./index.7d109aa8.js";import"./_commonjsHelpers.edff4021.js";import"./cloud.6055f26b.js";import"https://cdn.jsdelivr.net/npm/leancloud-storage@4.14.0/dist/av-min.js";/* empty css                       */const O=p('<section class="flex h-screen w-screen flex-col overflow-hidden p-4"><header class="my-2 w-full text-xl">Tag 编辑器</header><section class="flex-1 overflow-hidden px-2"></section></section>',6),U=p('<form class="flex h-full w-full flex-1 flex-col gap-2"><blockquote>请根据英文构造 Tag，填写下面表单并提交即可</blockquote><label><span>英文名称</span><input type="text" name="en"></label><label><span>中文名称</span><input type="text" name="cn"></label><label><span>🔞 R18</span><input type="checkbox" name="r18" value="1"></label><label><span>大致效果数值</span><input type="number" name="count" min="0" max="Infinity"></label><blockquote>大致效果数值是显示在右上角的数值，可以参考相似词汇的数值进行填写</blockquote><blockquote>相似词汇（如有，点击它，然后提交修改即可😄）</blockquote><output class="my-1 max-h-[50vh] flex-1 overflow-auto rounded-md p-2 outline outline-1  outline-slate-400"></output><label><span>🚫删除模式？<sub class="text-xs">是否删除这个 Tag</sub></span><input type="checkbox" name="delete" value="1"></label><button class="btn rounded-md bg-green-700 text-slate-50" type="submit">提交</button></form>',39),V=p('<ul class=" text-xs"></ul>',2),z=p("<div> 空</div>",2),G=p('<li class="flex cursor-pointer gap-1 hover:bg-slate-600"><span></span><span></span><span></span><span></span></li>',10),le=()=>(()=>{const t=c(O),n=t.firstChild,l=n.nextSibling;return o(l,m(J,{})),t})(),J=()=>{const t=j({r18:0,en:"",count:0,cn:""}),{en:n,count:l,cn:a,r18:i}=t;return(()=>{const u=c(U),b=u.firstChild,r=b.nextSibling,g=r.firstChild,f=g.nextSibling,$=r.nextSibling,F=$.firstChild,S=F.nextSibling,d=$.nextSibling,y=d.firstChild,E=y.nextSibling,_=d.nextSibling,T=_.firstChild,D=T.nextSibling,w=_.nextSibling,q=w.nextSibling,R=q.nextSibling;return u.addEventListener("submit",e=>{e.preventDefault();const h=e.target,C=new FormData(h),s=Object.fromEntries(C.entries());s.r18="r18"in s?1:0,s.delete="delete"in s,s.count=parseInt(s.count),k.uploadTag(s).then(()=>{h.reset(),L.success("已经提交保存，等待审核完成，感谢您的参与😄"),console.log(s,C)})}),f.$$input=e=>{n(e.target.value)},o(R,m(K,{text:n,onDataReturn:e=>{l(e[0].count)},onClick:e=>{console.log(e),B(()=>{n(e.en),a(e.cn),i(e.r18),l(e.count)})}})),x(()=>f.value=n()),x(()=>S.value=a()),x(()=>E.checked=!!i()),x(()=>D.value=l()),v(),u})()},K=t=>{const n=N(()=>k.searchTags(t.text(),!0),{immediately:!1,initValue:[],deps:[P(t.text,300)]});return H(()=>{t.onDataReturn&&t.onDataReturn(n())},[n]),(()=>{const l=c(V);return o(l,m(I,{get each(){return n()},get fallback(){return c(z)},children:a=>(()=>{const i=c(G),u=i.firstChild,b=u.nextSibling,r=b.nextSibling,g=r.nextSibling;return i.$$click=()=>t.onClick&&t.onClick(a),o(u,()=>a.en),o(b,()=>a.cn),o(r,()=>a.count),o(g,()=>a.r18?"🔞":""),v(),i})()})),l})()};A(["input","click"]);export{le as TagsChangePage};
