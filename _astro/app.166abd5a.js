import{y as be,g as f,u as fe,t as h,z as W,f as i,i as l,e as g,h as z,s as he,F as me}from"./web.9ee1b91f.js";import{U as O,x as Se}from"./index.4f2c4b12.js";import{A as G}from"./cloud.6055f26b.js";import{_ as pe}from"./preload-helper.101896b7.js";import"./Webview.b36c6241.js";import"https://cdn.jsdelivr.net/npm/leancloud-storage@4.14.0/dist/av-min.js";import"./index.c584f020.js";import"./Panel.801c2a10.js";import"./index.b92d985b.js";/* empty css                       */import"./_commonjsHelpers.edff4021.js";import"./GlobalData.4e554cac.js";const ve=h('<div class="m-auto max-w-lg p-4"></div>',2),Ce=()=>pe(()=>import("https://esm.sh/@antv/g2plot"),[]),ye=function(r){let a;return be(async()=>{const{Line:e}=await Ce();new e(a,{data:r.data,xField:r.x,yField:r.y}).render()}),(()=>{const e=f(ve),t=a;return typeof t=="function"?fe(t,e):a=e,e})()},we=h('<section><header class="flex items-center justify-center gap-2 pt-12 text-2xl text-pink-400">搜索引擎<a href="https://www.meilisearch.com/"><img src="https://img.shields.io/badge/PowerBy-MeiliSearch-ff69b4" alt=""></a></header><!#><!/><ul class="flex flex-col justify-evenly gap-2"><aside class="grid grid-flow-col"><label>总使用量：<!#><!/>/<!#><!/><progress max="100"></progress>(<!#><!/>%)</label></aside><!#><!/></ul></section>',25),Fe=h('<li class="rounded-md p-2 text-xs transition-all hover:bg-slate-700"><header class="grid grid-flow-col text-sm"><span><!#><!/>号机</span><span></span><a>前往查看 ➡️ </a></header><nav class="grid grid-flow-col"><nav>状态：<!#><!/></nav><label>使用量 <!#><!/>/<!#><!/>：</label><label><progress max="100"></progress>(<!#><!/>%)</label></nav></li>',30),Ee=[];function U(r){const a=r.reduce((n,s)=>n+s.usage.search_request_count.current,0),e=r.reduce((n,s)=>n+s.usage.search_request_count.limit,0),t=a*100/(e||1);return{used:a,total:e,per:t}}function qe(){const r=O(()=>new G.Query("stats").limit(1).equalTo("from","meili").addDescending("createdAt").find().then(t=>t[0].toJSON().data).then(t=>JSON.parse(t).flatMap(n=>n||[])).then(t=>(console.log(t),t)),{immediately:!W,initValue:Ee}),a=O(()=>new G.Query("stats").limit(7).equalTo("from","meili").addDescending("createdAt").find().then(t=>t.reverse().map(n=>JSON.parse(n.toJSON().data).flatMap(s=>s||[])).map((n,s)=>({index:s,...U(n)}))),{initValue:[]}),e=Se(()=>U(r()));return(()=>{const t=f(we),n=t.firstChild,s=n.nextSibling,[_,o]=i(s.nextSibling),$=_.nextSibling,u=$.firstChild,c=u.firstChild,b=c.firstChild,d=b.nextSibling,[m,F]=i(d.nextSibling),S=m.nextSibling,E=S.nextSibling,[p,q]=i(E.nextSibling),v=p.nextSibling,A=v.nextSibling,B=A.nextSibling,[C,X]=i(B.nextSibling);C.nextSibling;const Z=u.nextSibling,[H,K]=i(Z.nextSibling);return l(t,g(ye,{get data(){return a()},x:"index",y:"used"}),_,o),l(c,()=>e().used,m,F),l(c,()=>e().total,p,q),l(c,()=>e().per.toFixed(2),C,X),l($,g(me,{get each(){return r()},children:x=>{const D=x.usage.search_request_count.current,M=x.usage.search_request_count.limit;return(()=>{const j=f(Fe),J=j.firstChild,N=J.firstChild,Y=N.firstChild,[L,ee]=i(Y.nextSibling);L.nextSibling;const P=N.nextSibling,te=P.nextSibling,le=J.nextSibling,V=le.firstChild,ne=V.firstChild,ie=ne.nextSibling,[ae,re]=i(ie.nextSibling),y=V.nextSibling,se=y.firstChild,oe=se.nextSibling,[T,ce]=i(oe.nextSibling),_e=T.nextSibling,ue=_e.nextSibling,[k,ge]=i(ue.nextSibling);k.nextSibling;const I=y.nextSibling,Q=I.firstChild,$e=Q.nextSibling,de=$e.nextSibling,[R,xe]=i(de.nextSibling);return R.nextSibling,l(N,()=>x.id,L,ee),l(P,()=>x.region.name),l(V,()=>x.current_state,ae,re),l(y,D,T,ce),l(y,M,k,ge),Q.value=D*100/M,l(I,()=>(D*100/M).toFixed(2),R,xe),z(()=>he(te,"href",x.url)),j})()}}),H,K),z(()=>v.value=e().per),t})()}const Ae=h('<section class="flex h-screen w-screen flex-col items-center overflow-auto"><nav class="font-global flex w-full max-w-6xl  flex-col gap-4 py-12 text-center"><header class=" mb-4  text-2xl">📊魔导绪论 数据统计站<sup class="mx-4 text-sm text-yellow-600">24小时内</sup></header><a href="https://analytics.umami.is/share/7vG3EWy6X6ZE8B68">详细情况➡️</a><main class="flex flex-col gap-2"><nav class="flex justify-evenly gap-2"><!#><!/><!#><!/><!#><!/><!#><!/></nav><!#><!/></main></nav></section>',24),Be=h('<div><span class="text-4xl"><!#><!/> <sup class="-top-6 rounded-md border border-green-700 text-sm text-green-700">+<!#><!/></sup></span><div></div></div>',12),De={bounces:{value:0,change:0},pageviews:{value:10,change:10},totaltime:{value:992,change:992},uniques:{value:1,change:1}},Re=()=>{const r=()=>Date.now()-864e5,a=O(()=>fetch(`https://tag-server.deno.dev/site/stat?start_at=${r()}&end_at=${Date.now()}&unit=day`).then(e=>e.json()),{immediately:!W,initValue:De});return(()=>{const e=f(Ae),t=e.firstChild,n=t.firstChild,s=n.nextSibling,_=s.nextSibling,o=_.firstChild,$=o.firstChild,[u,c]=i($.nextSibling),b=u.nextSibling,[d,m]=i(b.nextSibling),F=d.nextSibling,[S,E]=i(F.nextSibling),p=S.nextSibling,[q,v]=i(p.nextSibling),A=o.nextSibling,[B,C]=i(A.nextSibling);return l(o,g(w,{get val(){return a().pageviews},children:"访问量"}),u,c),l(o,g(w,{get val(){return a().bounces},children:"跳出数"}),d,m),l(o,g(w,{get val(){return a().uniques},children:"访客"}),S,E),l(o,g(w,{get val(){return a().totaltime},children:"停留时间"}),q,v),l(_,g(qe,{}),B,C),e})()},w=r=>(()=>{const a=f(Be),e=a.firstChild,t=e.firstChild,[n,s]=i(t.nextSibling),_=n.nextSibling,o=_.nextSibling,$=o.firstChild,u=$.nextSibling,[c,b]=i(u.nextSibling),d=e.nextSibling;return l(e,()=>r.val.value,n,s),l(o,()=>r.val.change,c,b),l(d,()=>r.children),a})();export{Re as StatusPage};
